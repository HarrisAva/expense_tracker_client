<html>
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
  />
  <body>
    <div class="container">
      <br />
      <h2 class="text-success">List of Expenses</h2>
      <div>
        <a class="add-expense" routerLink="/expenses/new">Add Expense</a>
      </div>

      <div class="total">
        <p>
          <strong
            >Total amount: ${{
              totalAmount.toLocaleString("en-US", {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
              })
            }}
          </strong>
        </p>
      </div>

      <div>
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th scope="col" class="sort-header" (click)="sortData('date')">
                Date
              </th>
              <th scope="col" class="sort-header" (click)="sortData('title')">
                Title
              </th>
              <th scope="col" class="sort-header" (click)="sortData('amount')">
                Amount
              </th>
              <th
                scope="col"
                class="sort-header"
                (click)="sortData('category')"
              >
                Category
              </th>
              <th>Edit/Delete</th>
            </tr>
          </thead>

          <tbody>
            @for (expense of expenses; track expense.id) {
            <tr scope="row">
              <td>
                {{ expense.date }}
              </td>
              <td>
                {{ expense.title }}
              </td>
              <td class="number-column">
                {{
                  expense.amount.toLocaleString("en-US", {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                  })
                }}
              </td>
              <td>
                {{ expense.category.name }}
              </td>
              <td>
                <a
                  class="material-symbols-outlined"
                  edit
                  data-toggle="popover"
                  title="Edit"
                  data-placement="left"
                  (click)="onEditExpense(expense.id)"
                  >edit</a
                >
                <a
                  class="material-symbols-outlined"
                  delete
                  data-toggle="popover"
                  title="Delete"
                  data-placement="right"
                  (click)="onDeleteExpense(expense.id)"
                >
                  delete
                </a>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
